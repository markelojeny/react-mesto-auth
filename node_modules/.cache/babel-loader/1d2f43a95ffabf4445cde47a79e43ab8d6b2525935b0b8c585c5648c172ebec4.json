{"ast":null,"code":"class Api {\n  constructor(config) {\n    this._url = config.url;\n    this._headers = config.headers;\n  }\n  _handleResponse(res) {\n    return res.ok ? res.json() : Promise.reject(`Ошибка в ${res.status}`);\n  }\n  getUserInfo() {\n    return fetch(`${this._url}/users/me`, {\n      headers: this._headers\n    }).then(res => {\n      return this._handleResponse(res);\n    });\n  }\n  getInitialCards() {\n    return fetch(`${this._url}/cards`, {\n      headers: this._headers\n    }).then(res => {\n      return this._handleResponse(res);\n    });\n  }\n  addCard(data) {\n    return fetch(`${this._url}/cards`, {\n      method: 'POST',\n      headers: this._headers,\n      body: JSON.stringify({\n        name: `${data.name}`,\n        link: `${data.link}`\n      })\n    }).then(res => {\n      return this._handleResponse(res);\n    });\n  }\n  editUser(data) {\n    return fetch(`${this._url}/users/me`, {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify({\n        name: `${data.name}`,\n        about: `${data.about}`\n      })\n    }).then(res => {\n      return this._handleResponse(res);\n    });\n  }\n  _addLike(cardId) {\n    return fetch(`${this._url}/cards/${cardId}/likes`, {\n      method: 'PUT',\n      headers: this._headers\n    }).then(res => {\n      return this._handleResponse(res);\n    });\n  }\n  _deleteLike(cardId) {\n    return fetch(`${this._url}/cards/${cardId}/likes`, {\n      method: 'DELETE',\n      headers: this._headers\n    }).then(res => {\n      return this._handleResponse(res);\n    });\n  }\n  changeLikeCardStatus(cardId, isLiked) {\n    return isLiked ? this._deleteLike(cardId) : this._addLike(cardId);\n  }\n  deleteCard(id) {\n    return fetch(`${this._url}/cards/${id}`, {\n      method: 'DELETE',\n      headers: this._headers\n    }).then(res => {\n      return this._handleResponse(res);\n    });\n  }\n  changeAvatar(_ref) {\n    let {\n      avatar\n    } = _ref;\n    return fetch(`${this._url}/users/me/avatar`, {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify({\n        avatar: `${avatar}`\n      })\n    }).then(res => {\n      return this._handleResponse(res);\n    });\n  }\n}\nconst api = new Api({\n  url: 'https://mesto.nomoreparties.co/v1/cohort-62',\n  headers: {\n    authorization: 'dee17758-01f3-41db-81d2-b39918f89271',\n    'Content-Type': 'application/json'\n  }\n});\nexport default api;","map":{"version":3,"names":["Api","constructor","config","_url","url","_headers","headers","_handleResponse","res","ok","json","Promise","reject","status","getUserInfo","fetch","then","getInitialCards","addCard","data","method","body","JSON","stringify","name","link","editUser","about","_addLike","cardId","_deleteLike","changeLikeCardStatus","isLiked","deleteCard","id","changeAvatar","_ref","avatar","api","authorization"],"sources":["/Users/markelojeny/Desktop/mesto-react/src/utils/api.js"],"sourcesContent":["class Api {\n    constructor(config) {\n        this._url = config.url;\n        this._headers = config.headers;\n    }\n\n    _handleResponse (res) {\n      return res.ok\n        ? res.json()\n        : Promise.reject(`Ошибка в ${res.status}`);\n    }\n    \n    getUserInfo() {\n        return fetch(`${this._url}/users/me`, {\n            headers: this._headers\n        })\n        .then((res) => {\n          return this._handleResponse(res)\n        });\n    }\n\n    getInitialCards() {\n        return fetch(`${this._url}/cards`, {\n            headers: this._headers\n        })\n        .then((res) => {\n          return this._handleResponse(res)\n        });\n    }\n    \n    addCard(data) {\n        return fetch(`${this._url}/cards`, {\n          method: 'POST',\n          headers: this._headers,\n          body: JSON.stringify({\n            name: `${data.name}`,\n            link: `${data.link}`\n          })\n        })\n        .then((res) => {\n          return this._handleResponse(res)\n        });\n    }\n\n    editUser(data) {\n        return fetch(`${this._url}/users/me`, {\n            method: 'PATCH',\n            headers: this._headers,\n            body: JSON.stringify({\n              name: `${data.name}`,\n              about: `${data.about}`\n            })\n        })\n        .then((res) => {\n          return this._handleResponse(res)\n        });\n    }\n    \n    _addLike(cardId) {\n        return fetch(`${this._url}/cards/${cardId}/likes`, {\n          method: 'PUT',\n          headers: this._headers,\n        })\n        .then((res) => {\n          return this._handleResponse(res)\n        });\n    }\n\n    _deleteLike(cardId) {\n        return fetch(`${this._url}/cards/${cardId}/likes`, {\n          method: 'DELETE',\n          headers: this._headers,\n        })\n        .then((res) => {\n          return this._handleResponse(res)\n        });\n  }\n\n  changeLikeCardStatus(cardId, isLiked) {\n    return (\n      isLiked ? (\n        this._deleteLike(cardId)\n      ) : (\n        this._addLike(cardId)\n      )\n    )\n  }\n    \n    deleteCard(id) {\n        return fetch(`${this._url}/cards/${id}`, {\n          method: 'DELETE',\n          headers: this._headers,\n        })\n        .then((res) => {\n          return this._handleResponse(res)\n        });\n    }\n    \n    changeAvatar({ avatar }) {\n        return fetch(`${this._url}/users/me/avatar`, {\n          method: 'PATCH',\n          headers: this._headers,\n          body: JSON.stringify({\n            avatar: `${avatar}`\n          })\n        })\n        .then((res) => {\n          return this._handleResponse(res)\n        });\n    }\n} \n\nconst api = new Api ({\n  url: 'https://mesto.nomoreparties.co/v1/cohort-62',\n  headers: {\n    authorization: 'dee17758-01f3-41db-81d2-b39918f89271',\n    'Content-Type': 'application/json'\n  }\n})\n\nexport default api;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}